import{e as h,r,i as p,o as _,g as m,w as c,b as l,h as w,S as g,n as v}from"./DFLfTfYP.js";import{_ as b,O as u}from"./LbRQCozO.js";const x=h({__name:"index",setup(y){const s=r(""),o=r(window==null?void 0:window.navigator),i=r(0),d=r(0),f=async(t,a)=>{try{return await $fetch("/api/location",{method:"POST",body:{lat:t,lon:a}})}catch(e){console.error("Failed to get the location data from the server due to: ",e)}};return(()=>{var t,a,e;o!=null&&o.value&&((t=o==null?void 0:o.value)!=null&&t.geolocation?(e=(a=o==null?void 0:o.value)==null?void 0:a.geolocation)==null||e.getCurrentPosition(n=>{i.value=n.coords.latitude,d.value=n.coords.longitude},n=>{console.error("Error fetching location due to:",n)}):console.error("Geolocation is not supported by this browser."))})(),p([i,d],async([t,a])=>{const e=await f(t,a);e&&(s.value=(e==null?void 0:e.city)||(e==null?void 0:e.name)||"",v(`/${s.value}`))}),(t,a)=>(_(),m(g,null,{default:c(()=>[l(b,{locationToFind:w(s)},null,8,["locationToFind"])]),fallback:c(()=>[l(u)]),pending:c(()=>[l(u)]),_:1}))}});export{x as default};
