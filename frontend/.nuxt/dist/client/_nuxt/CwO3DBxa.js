import{e as m,r as c,i as w,o as g,g as v,w as l,b as s,h as b,S as y,n as S}from"./tiYHJAre.js";import{_ as p,O as i}from"./Bhz-MSjW.js";const O=m({__name:"index",setup(x){const n=c(""),a=c(window==null?void 0:window.navigator),d=c(0),u=c(0),_=async(o,r)=>{try{return await $fetch("/api/location",{method:"POST",body:{lat:o,lon:r}})}catch(e){console.error("Failed to get the location data from the server due to: ",e)}};return(()=>{var o,r,e;a!=null&&a.value&&((o=a==null?void 0:a.value)!=null&&o.geolocation)?(e=(r=a==null?void 0:a.value)==null?void 0:r.geolocation)==null||e.getCurrentPosition(t=>{var f,h;d.value=(f=t==null?void 0:t.coords)==null?void 0:f.latitude,u.value=(h=t==null?void 0:t.coords)==null?void 0:h.longitude},t=>{console.error("Error fetching location due to:",t)}):console.error("Geolocation is not supported by this browser.")})(),w([d,u],async([o,r])=>{const e=await _(o,r);e&&(n.value=(e==null?void 0:e.city)||(e==null?void 0:e.name)||"",S(`/${n==null?void 0:n.value}`))}),(o,r)=>(g(),v(y,null,{default:l(()=>[s(p,{locationToFind:b(n)},null,8,["locationToFind"])]),fallback:l(()=>[s(i)]),pending:l(()=>[s(i)]),_:1}))}});export{O as default};
